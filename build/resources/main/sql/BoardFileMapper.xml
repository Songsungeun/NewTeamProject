<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="honey.dao.HoneyBoardFileDao">
  <resultMap type="HoneyBoardFile" id="boardFileMap">
    <id column="Board_no" property="boardNo"/> 
    <id column="File_No" property="fileNo"/> 
    <id column="Member_no" property="mb_no"/>
    <id column="File_Name" property="fileName"/>
    <id column="ORI_FILENM" property="OriginFileName"/>
    <id column="File_Size" property="fileSize"/>
  </resultMap>
  
  <insert id="boardPhotoInsert" parameterType="HoneyBoardFile">
    insert into board_files(File_Name, ORI_FILENM, Member_No, File_Size, Board_no) (select
    #{fileName}, #{OriginFileName}, #{mb_no}, #{fileSize},
    (select max(bd_no) from honey_boards))
  </insert>
  
  <select id="fileList" resultMap="boardFileMap" parameterType= "int">
    select File_No, File_Name, Board_No, ORI_FILENM, Member_no
       from board_files 
   where Member_no = #{memberNo}
  </select>
</mapper>




















